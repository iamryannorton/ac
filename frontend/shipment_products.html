<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="manifest" href="site.webmanifest">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="stylesheet" href="css/dashfront.css">
    <!-- Place favicon.ico in the root directory -->

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/contracts.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-icon-top navbar-expand-lg">
    <div class="text-left">
        <a href="./dashfront.html"><img style="max-width: 200px" src="./img/logoTop.png" alt="Armada Logo"></a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <form class="form-inline" style="width: 100%; margin-left: 25px;">
            <div class="input-group" style="width: 100%;">
                <div class="input-group-prepend">
                    <span class="input-group-text" style="background-color: white; border-right: 0px;"><i class="fa fa-search"></i></span>
                </div>
                <input class="form-control mr-sm-2" type="text" placeholder="Search supply chain..." aria-label="Search" style="border-left: 0px;">
            </div>
        </form>
    </div>
</nav>

<div class="container-fluid">
    <br/>
    <div class="row">
        <div class="col-lg-2" style="max-width: 12%;">
            <ul style="list-style-type:none">
                <li><a href="https://google.com"><i class="fa fa-ship text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a>Dashboard
                </li>
                <li><a href="https://google.com"><i class="fa fa-cubes text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Analytics
                </li>
                <li><a href="https://google.com"><i class="fa fa-envelope text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a>  Orders
                </li>
                <li><a href="https://google.com"><i class="fa fa-truck text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Routes
                </li>
                <li><a href="https://google.com"><i class="fa fa-btc text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a>  Tokens
                </li>
                <li><a href="https://google.com"><i class="fa fa-building text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Warehouses
                </li>
                <li><a href="https://google.com"><i class="fa fa-ship text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Sea
                </li>
                <li><a href="https://google.com"><i class="fa fa-truck text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Freight
                </li>
                <li><a href="https://google.com"><i class="fa fa-train text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Rail
                </li>
                <li><a href="https://google.com"><i class="fa fa-car text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Couriers
                </li>
                <li><a href="https://google.com"><i class="fa fa-plane text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Air
                </li>
            </ul>
        </div>
        <div class="col-lg-10">
            <div class="row">
                <div class="col-md-12">
                    <h3>Create Shipment</h3>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <table class="table">
                            <thead>
                                <tr>
                                   <th scope="col">Product Name</th>
                                   <th scope="col">Location</th>
                                   <th scope="col">SKU</th>
                                   <th scope="col">Unit Weight</th>
                                   <th scope="col">In Stock</th>
                                   <th scope="col">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><a href="#">Piscos (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>XAD3F276</td>
                                    <td>21.00 lbs</td>
                                    <td>46 units</td>
                                    <td><input type="number" min="0" step="1" max="46" class="form-control product-input" data-sku="XAD3F276" data-unit-weight="21.00" data-name="Piscos (1 case)" id="product-input-XAD3F276" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Meiomi Pinot Noir (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>YCJ4FJ8D</td>
                                    <td>21.00 lbs</td>
                                    <td>32 units</td>
                                    <td><input type="number" min="0" step="1" max="32" class="form-control product-input" data-sku="YCJ4FJ8D" data-unit-weight="21.00" data-name="Meiomi Pinot Noir (1 case)" id="product-input-YCJ4FJ8D" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Antucura Cabernet (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>K38D56YZ</td>
                                    <td>21.00 lbs</td>
                                    <td>67 units</td>
                                    <td><input type="number" min="0" step="1" max="67" class="form-control product-input" data-sku="K38D56YZ" data-unit-weight="21.00" data-name="Antucura Cabernet (1 case)" id="product-input-K38D56YZ" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Leonetti Sangiovese (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>VDK3F927</td>
                                    <td>21.00 lbs</td>
                                    <td>11 units</td>
                                    <td><input type="number" min="0" step="1" max="11" class="form-control product-input" data-sku="VDK3F927" data-unit-weight="21.00" data-name="Leonetti Sangiovese (1 case)" id="product-input-VDK3F927" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Chateau Pontet-Canet (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>VSK4C264</td>
                                    <td>21.00 lbs</td>
                                    <td>94 units</td>
                                    <td><input type="number" min="0" step="1" max="94" class="form-control product-input" data-sku="VSK4C264" data-unit-weight="21.00" data-name="Chateau Pontet-Canet (1 case)" id="product-input-VSK4C264" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Quintessa (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>XPB8G736</td>
                                    <td>21.00 lbs</td>
                                    <td>78 units</td>
                                    <td><input type="number" min="0" step="1" max="78" class="form-control product-input" data-sku="XPB8G736" data-unit-weight="21.00" data-name="Quintessa (1 case)" id="product-input-XPB8G736" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Clarendon Hills Astralis (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>XPB8G736</td>
                                    <td>21.00 lbs</td>
                                    <td>78 units</td>
                                    <td><input type="number" min="0" step="1" max="78" class="form-control product-input" data-sku="XPB8G736" data-unit-weight="21.00" data-name="Clarendon Hills Astralis (1 case)" id="product-input-XPB8G736" placeholder="0"></td>
                                </tr>
                                <tr>
                                    <td><a href="#">Lapostolle Clos Apalta (1 case)</a><br><small>Each case contains 6 bottles.</small></td>
                                    <td><a href="#">Main Warehouse</a><br><small>Austin, United States</small></td>
                                    <td>XPB8G736</td>
                                    <td>21.00 lbs</td>
                                    <td>78 units</td>
                                    <td><input type="number" min="0" step="1" max="78" class="form-control product-input" data-sku="XPB8G736" data-unit-weight="21.00" data-name="Lapostolle Clos Apalta (1 case)" id="product-input-XPB8G736" placeholder="0"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Shipment Items</h4>
                            <table class="table" id="shipment-overview-table">
                                <tbody id="shipment-items-tbody">
                                    <tr id="no-items-tr">
                                        <td colspan="3">Add items to your shipment.</td>
                                    </tr>
                                </tbody>
                                <tbody>
                                    <tr id="total-weight-row">
                                        <td colspan="2"><b>Total Weight</b></td>
                                        <td><b><span id="total-weight">0.00</span> lbs</b></td>
                                    </tr>
                                </tbody>
                            </table>
                            <a href="create_contract_a.html" class="btn btn-primary btn-block btn-lg">Select Routes</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="js/main.js"></script>
<script>

$(".product-input").change(function() {
    let $input = $(this);
    let productName = $input.data('name');
    let productUnitWeight = parseFloat($input.data('unit-weight'));
    let productQuantity = parseInt($input.val());
    let productTotalWeight = productQuantity * productUnitWeight;
    let totalWeight = calculateTotalWeight();

    updateShipmentItem(productName, productQuantity, productTotalWeight);
    updateTotalWeight(totalWeight);
})

function calculateTotalWeight() {
    var totalWeights = 0;
    $("input.product-input").each(function() {
        var $input = $(this);
        var productUnitWeight = parseFloat($input.data('unit-weight'));
        var productQuantity = parseInt($input.val());
        var productTotalWeight = productQuantity * productUnitWeight;
        if (!isNaN(productTotalWeight)) {
            totalWeights += productTotalWeight;
        }
    });
    return totalWeights;
}

function updateShipmentItem(name, quantity, totalWeight) {
    let $tableBody = $("#shipment-items-tbody");
    let $emptyShipment = $("#no-items-tr");
    let $row = $tableBody.find('tr[data-name="' + name + '"]');
    let hasRow = $row.length > 0;
    let hasRows = $tableBody.find('tr').length > 0;

    var innerRowHTML = '<td>' + name + '</td>';
    innerRowHTML += '<td>' + quantity + ' units</td>';
    innerRowHTML += '<td>' + totalWeight.toFixed(2) + ' lbs</td>';
    var rowHTML = '<tr data-name="' + name + '">' + innerRowHTML + '</tr>';

    $emptyShipment.remove();

    if (!quantity) {
        $row.remove();
    } else if (hasRow) {
        $row.html(innerRowHTML);
    } else {
        $tableBody.append(rowHTML);
    }
}

function updateTotalWeight(weight) {
    $("#total-weight").text((weight || 0).toFixed(2));
}

</script>
</body>
</html>
