<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Armada</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="css/dashfront.css">
    <style>
        body { margin:0; padding:0; background-color: #f7f8f9 !important; }
        #map { height:500px;}
        .card {
            box-shadow: 0 1px 3px 0 rgba(0,0,0,0.15);
            border-radius: 12px !important;
            overflow: hidden;
        }
    </style>
    <script src="js/modernizr.custom.js"></script>
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"></script>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-grid.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-reboot.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<nav class="navbar navbar-icon-top navbar-expand-lg" style="background-color: #f7f8f9;">
  <div class="text-left">
              <a href="./dashfront.html"><img style = "max-width: 200px" src="./img/logoTop.png" alt="Armada Logo"></a>
  </div>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <form class="form-inline" style="width: 100%; margin-left: 25px;">
    <div class="input-group" style="width: 100%;">
        <div class="input-group-prepend">
    <span class="input-group-text" style="background-color: white; border-right: 0px;"><i class="fa fa-search"></i></span>
  </div>
      <input class="form-control mr-sm-2" type="text" placeholder="Search supply chain..." aria-label="Search" style="border-left: 0px;">
      </div>
    </form>
  </div>
</nav>

<div class="container-fluid">
  <br/>
  <div class="row">
    <div class="col-lg-2" style="max-width: 12%;">
      <ul style="list-style-type:none">
        <li><a href="https://google.com"><i class="fa fa-ship text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a>Dashboard
        </li>
        <li><a href="https://google.com"><i class="fa fa-cubes text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Analytics
        </li>
        <li><a href="https://google.com"><i class="fa fa-envelope text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a>  Orders
        </li>
        <li><a href="https://google.com"><i class="fa fa-truck text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Routes
        </li>
        <li><a href="https://google.com"><i class="fa fa-btc text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a>  Tokens
        </li>
        <li><a href="https://google.com"><i class="fa fa-building text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Warehouses
        </li>
        <li><a href="https://google.com"><i class="fa fa-ship text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Sea
        </li>
        <li><a href="https://google.com"><i class="fa fa-truck text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Freight
        </li>
        <li><a href="https://google.com"><i class="fa fa-train text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Rail
        </li>
        <li><a href="https://google.com"><i class="fa fa-car text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Couriers
        </li>
        <li><a href="https://google.com"><i class="fa fa-plane text-muted fa-2x" style="font-size: 1.1em; width: 32px;"></i></a> Air
        </li>
      </ul>
    </div>

    <div class="col-lg-10">
      <div class="card">
        <div id='map'></div>
        <div class="card-body">
          <div class="row">
              <div class="col-md-5" style="border-right: 1px solid #eee;">
                <h5 style="color: #00c1db; margin-bottom: 15px;">Your Active Shipments</h5>
                <div>
                  <p style="margin-bottom: 2px;">
                    <b>Austin, USA ⟷ Shanghai, China <i class="fa fa-ship text-muted" style="float: right;"></i></b><br/>
                    <small>Wine · <a href="https://etherscan.io/address/0x9139413acd0143919w391521">0x9139413acd0143919w391521</a></small>
                  </p>
                  <div class="progress">
                    <div class="progress-bar progress-bar-success-striped" style="width: 40%; background-color: #7ad6ff">
                      <span class="sr-only">40% Complete (success)</span>
                    </div>
                  </div>
                  <hr/>
                </div>
              </div>
              <div class="col-md-4" style="border-right: 1px solid #eee;">
                <h5 style="color: #00c1db; margin-bottom: 15px;">Your Active Bookings</h5>
                <div>
                  <p style="margin-bottom: 2px;"><small>
                    <b>HGK ⟷ Taiwan · </b><span style="text-overflow: ellipsis;"><a href="https://etherscan.io/address/0x49E033122C8300a6d5091ACf667494466eE4a9D2">0x912333122C8300a6d5012ACf667494466eE4a9D2</a></span></small><br/>
                  </p>
                  <hr/>
                </div>
                <div>
                  <p style="margin-bottom: 2px;"><small>
                    <b>HGK ⟷ Beijing · </b><span style="text-overflow: ellipsis;"><a href="https://etherscan.io/address/0x49E033122C8300a6d5091ACf667494466eE4a9D2">0x49E033122C8ad0a6d5091ACf667494466eE4a9D2</a></span></small><br/>
                  </p>
                  <hr/>
                </div>
                <button class="btn btn-sm btn-light" style="border: 1px solid #e0e0e0;">View all bookings</button>
                <br/>
                <br/>
                <br/>
                <h5 style="color: #00c1db; margin-bottom: 15px;">Active Contracts</h5>
                <div>
                  None
                </div>
              </div>
              <div class="col-md-3">
                  <img src="./images/front1.png" style="width: 100%;">
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    window.PATHS = {
      'atx-jp': {
        coords: [[[-97.73437500000001,31.052933985705163],[-98.4742700496622,31.74955469580011],[-99.22534797521833,32.441835359598784],[-99.98801400125765,33.12958981225085],[-100.76268219652655,33.812624697660304],[-101.54977533803653,34.49073916086745],[-102.3497247067362,35.16372453506789],[-103.16296980584403,35.83136402433848],[-103.9899579921245,36.4934323833697],[-104.83114400954915,37.14969559576176],[-105.68698941392574,37.799910552731596],[-106.55796187621576,38.44382473440123],[-107.44453435141149,39.081175896196214],[-108.34718409902973,39.711691763278935],[-109.26639154052641,40.33508973637524],[-110.20263893827887,40.95107661282522],[-111.15640888025801,41.55934832719974],[-112.1281825541691,42.15958971637121],[-113.11843779472943,42.751474314508165],[-114.12764688793847,43.33466418407254],[-115.15627411674848,43.908809789530295],[-116.20477303354168,44.47354992113061],[-117.27358344634737,45.0285116767534],[-118.36312810788067,45.57331051045531],[-119.47380909934854,46.107550356940244],[-120.60600390464242,46.63082384171911],[-121.76006117511307,47.142712587177776],[-122.93629619068372,47.642787625110664],[-124.13498602966814,48.130609926462654],[-125.35636446736464,48.605731059016634],[-126.60061663230364,49.06769398352242],[-127.86787345890096,49.516033998241596],[-129.15820598612092,49.950279841035496],[-130.47161956342893,50.36995495690485],[-131.80804803757746,50.77457893726049],[-133.1673480063056,51.16366913512963],[-134.549293237433,51.536742457959186],[-135.953569363593,51.893317336658725],[-137.37976897339075,52.2329158660377],[-138.82738722843385,52.555066107871006],[-140.29581814175572,52.85930454352745],[-141.7843516559077,53.145178658507696],[-143.29217165773406,53.4122496364759],[-144.81835506093316,53.66009513557968],[-146.3618720764489,53.888312115210226],[-147.9215877742181,54.09651967705022],[-149.49626501775694,54.2843618805052],[-151.08456882572702,54.45151048962291],[-152.68507218253524,54.59766760658202],[-154.2962632840774,54.72256814595912],[-155.91655416615282,54.825982104405746],[-157.5442906233476,54.90771658218377],[-159.17776328701729,54.96761751625252],[-160.8152196942141,55.00557108924081],[-162.45487714681232,55.021504784565344],[-164.0949361333768,55.01538806499642],[-165.73359406692128,54.98723265988075],[-167.369059080678,54.93709245471572],[-168.99956362196573,54.86506298550276],[-170.62337759131273,54.771280548944084],[-172.23882078976516,54.65592094775135],[-173.8442744609242,54.519197897794804],[-175.43819174442248,54.36136113026988],[-177.01910689268746,54.18269422728977],[-178.58564314117345,53.983512233186985],[-180,53.78346811379361]],[[180,53.78346811379361],[179.86348083805615,53.76415908625862],[178.32944593022373,53.52500491672555],[176.81332901274862,53.26644325636443],[175.31610079077953,52.98888820373948],[173.8386249634108,52.692771586377376],[172.38165862619567,52.37854015778853],[170.94585379658264,52.04665286315388],[169.53175993543675,51.697578202978896],[168.13982732965627,51.331791719269546],[166.77041119763416,50.94977362399096],[165.42377638036447,50.552006584887145],[164.10010248568022,50.1389736793005],[162.7994893607053,49.71115652253081],[161.52196277739418,49.269033573588075],[160.26748022732946,48.81307861796341],[159.03593673412968,48.34375942428632],[157.82717060435436,47.861536569457115],[156.6409690502209,47.36686242501759],[155.4770736294204,46.860180296127616],[154.33518545856154,46.34192370350692],[153.214970167096,45.812515798041375],[152.11606256786857,45.27236889739225],[151.0380710286306,44.72188413384184],[149.98058153595127,44.161451202714616],[148.9431614489802,43.59144820098778],[147.9253629455218,43.012241546111916],[146.92672616694497,42.424185965567474],[145.94678207166544,41.8276245482559],[144.98505500939356,41.222888849442256],[144.0410650301313,40.61029904160617],[143.11432994312676,39.99016410420457],[142.20436714173337,39.362782045988034],[141.31069521046382,38.7284401541333],[140.43283533054063,38.087415265048556],[139.5703125,37.43997405227057]]],
        isSelected: false,
        color: '#0000ff'
      },
      'jp-tw': {
        coords: [[[139.21875,37.16031654673677],[139.00526281098988,37.04097627242824],[138.7924467978435,36.92125471870088],[138.58029906572202,36.8011547326674],[138.36881669973644,36.68067914591144],[138.1579967656748,36.559830774471884],[137.94783631071704,36.438612418830445],[137.7383323641382,36.31702686390275],[137.52948193799915,36.19507687903258],[137.32128202782565,36.072765217989314],[137.1137296132755,35.95009461896852],[136.9068216587938,35.827067804595515],[136.70055511425656,35.70368748193189],[136.49492691560263,35.57995634248502],[136.2899339854541,35.45587706222019],[136.08557323372514,35.33145230157564],[135.8818415582197,35.20668470548014],[135.67873584521757,35.08157690337327],[135.47625297004953,34.95613150922811],[135.27438979766129,34.83035112157651],[135.07314318316656,34.70423832353663],[134.87250997238894,34.5777956828429],[134.67248700239338,34.45102575187817],[134.47307110200677,34.3239310677081],[134.27425909232787,34.196514152117665],[134.0760477872271,34.06877751164973],[133.8784339938357,33.94072363764562],[133.68141451302472,33.81235500628767],[133.4849861398738,33.68367407864364],[133.28914566413042,33.55468330071299],[133.09388987065844,33.42538510347488],[132.89921553987764,33.29578190293795],[132.70511944819316,33.165876100191696],[132.51159836841555,33.035670081459614],[132.31864907017135,32.9051662181536],[132.1262683203045,32.77436686693025],[131.93445288326825,32.64327436974827],[131.7431995215086,32.51189105392747],[131.552504995838,32.38021923220914],[131.36236606580107,32.24826120281761],[131.17277949003082,32.11601924952316],[130.983742026597,31.983495641706153],[130.7952504333456,31.850692634422284],[130.6073014682299,31.717612468469003],[130.41989188963382,31.584257370453034],[130.23301845668652,31.450629552858885],[130.0466779295696,31.316731214118374],[129.86086706981595,31.182564538681177],[129.6755826406014,31.048131697086227],[129.490821407028,30.913434846034022],[129.3065801364007,30.778476128459772],[129.12285559849585,30.643257673607348],[128.93964456582287,30.507781597104074],[128.7569438138786,30.372050001036104],[128.57475012139471,30.23606497402471],[128.39306027057796,30.099828591302987],[128.21187104734406,29.96334291479345],[128.03117924154424,29.82660999318605],[127.85098164718575,29.689631862016824],[127.67127506264573,29.552410543747158],[127.49205629087851,29.4149480478434],[127.31332213961676,29.277246370857082],[127.1350694215667,29.139307496505637],[126.9572949545969,29.00113339575335],[126.7799955619214,28.862726026892922],[126.60316807227683,28.724087335627267],[126.42680932009388,28.585219255151696],[126.25091614566314,28.44612370623649],[126.0754853952954,28.306802597309684],[125.90051392147639,28.1672578245401],[125.72599858301645,28.027491271920784],[125.55193624519465,27.887504811352514],[125.37832377989805,27.74730030272759],[125.2051580657558,27.606879594013837],[125.03243598826815,27.46624452133868],[124.86015443993085,27.325396909073472],[124.68831032035479,27.184338569917855],[124.51690053638059,27.043071304984323],[124.3459220021891,26.9015969038828],[124.17537163940712,26.759917144805314],[124.00524637720869,26.618033794610728],[123.83554315241233,26.475948608909516],[123.66625890957371,26.33366333214855],[123.49739060107439,26.191179697695905],[123.32893518720635,26.048499427925638],[123.16088963625276,25.905624234302547],[122.99325092456458,25.762555817466907],[122.82601603663345,25.619295867319146],[122.65918196516087,25.47584606310444],[122.49274571112369,25.332208073497263],[122.32670428383588,25.188383556685807],[122.16105470100706,25.044374160456318],[121.99579398879717,24.90018152227734],[121.83091918186834,24.7558072693838],[121.66642732343264,24.61125301886096],[121.50231546529758,24.46652037772823],[121.33858066790755,24.321610943022833],[121.17522000038281,24.176526301883296],[121.01223054055498,24.03126803163273],[120.84960937500001,23.885837699862005]]],
        isSelected: false,
        color: '#ff0000'
      },
      'cn-tw': {
        coords: [[[106.17187500000001,30.145127183376136],[106.33109175635899,30.091944631102688],[106.49013701417763,30.03857034912307],[106.64901071180955,29.985004955154025],[106.80771279374267,29.93124906712122],[106.9662432105655,29.877303303140017],[107.12460191893297,29.823168281496553],[107.28278888153221,29.76884462062887],[107.4408040670482,29.714332939108253],[107.59864745012904,29.659633855620772],[107.75631901135138,29.604747988948947],[107.91381873718551,29.54967595795355],[108.07114661996033,29.49441838155567],[108.2283026578283,29.43897587871884],[108.38528685473004,29.38334906843141],[108.54209922035909,29.32753856968905],[108.69873977012635,29.2715450014774],[108.85520852512448,29.215368982754953],[109.0115055120922,29.15901113243602],[109.16763076337847,29.102472069373945],[109.32358431690669,29.045752412344434],[109.47936621613857,28.988852780029077],[109.63497651003819,28.931773790999003],[109.79041525303582,28.87451606369875],[109.94568250499172,28.817080216430277],[110.10077833115989,28.75946686733712],[110.25570280215176,28.70167663438879],[110.41045599389976,28.64371013536519],[110.5650379876209,28.58556798784143],[110.71944886978041,28.52725080917255],[110.87368873205509,28.468759216478603],[111.02775767129685,28.410093826629804],[111.18165578949613,28.35125525623188],[111.33538319374532,28.29224412161157],[111.48893999620215,28.233061038802347],[111.64232631405301,28.173706623530148],[111.79554226947647,28.114181491199492],[111.94858798960648,28.05448625687957],[112.10146360649584,27.994621535290616],[112.25416925707957,27.934587940790358],[112.40670508313819,27.874386087360715],[112.5590712312613,27.814016588594583],[112.7112678528108,27.753480057682832],[112.86329510388448,27.692777107401422],[113.0151531452794,27.63190835009873],[113.16684214245537,27.570874397683],[113.3183622654986,27.50967586160995],[113.46971368908511,27.448313352870564],[113.62089659244445,27.38678748197905],[113.77191115932334,27.32509885896088],[113.9227575779493,27.263248093341115],[114.07343604099457,27.201235794132753],[114.22394674553976,27.139062569825352],[114.37428989303787,27.07672902837369],[114.52446568927813,27.0142357771867],[114.67447434435007,26.951583423116496],[114.82431607260766,26.888772572447515],[114.97399109263336,26.825803830885903],[115.12349962720242,26.76267780354901],[115.27284190324721,26.699395094954987],[115.4220181518217,26.635956309012652],[115.57102860806575,26.57236204901136],[115.71987351116991,26.508612917611178],[115.86855310434002,26.444709516833065],[116.01706763476207,26.38065244804931],[116.16541735356687,26.316442311974054],[116.31360251579527,26.252079708653998],[116.46162338036314,26.187565237459204],[116.60948021002659,26.122899497074112],[116.75717327134733,26.058083085488647],[116.90470283465795,25.99311659998952],[117.05206917402768,25.92800063715158],[117.19927256722781,25.862735792829426],[117.34631329569778,25.797322662149085],[117.4931916445107,25.731761839499843],[117.63990790233973,25.666053918526238],[117.78646236142401,25.60019949212017],[117.93285531753521,25.534199152413155],[118.07908706994367,25.468053490768714],[118.22515792138505,25.40176309777493],[118.37106817802722,25.335328563237073],[118.51681814943686,25.268750476170432],[118.66240814854653,25.202029424793253],[118.80783849162184,25.13516599651978],[118.95310949822863,25.068160777953484],[119.09822149120048,25.001014354880382],[119.24317479660623,24.93372731226251],[119.38796974371763,24.8663002342315],[119.53260666497737,24.798733704082323],[119.67708589596693,24.731028304267134],[119.82140777537492,24.663184616389263],[119.96557264496526,24.59520322119727],[120.10958084954582,24.527084698579248],[120.2534327369369,24.458829627557126],[120.39712865794024,24.390438586281178],[120.54066896630786,24.321912152024584],[120.68405401871128,24.253250901178223],[120.82728417471078,24.184455409245448],[120.97035979672488,24.115526250837103],[121.11328125000001,24.04646399966657]]],
        isSelected: false,
        color: '#00ff00'
      }
    }


    mapboxgl.accessToken = 'pk.eyJ1IjoiamFja2llejM4OTUiLCJhIjoiY2lsZnppc2R2MjN4NXZubWNta2k4d2d0OSJ9.Rno_SSBkcFDlq4rCoLHnQg';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        center: [118.654001, 26.936789],
        zoom: 1
    });

    map.on('click', function(e) {
      var features = map.queryRenderedFeatures(e.point, {
        layers: ['blockchain2'] // replace this with the name of the layer
      });

      if (!features.length) {
        return;
      }

      var feature = features[0];

      var popup = new mapboxgl.Popup({ offset: [0, -15] })
        .setLngLat(feature.geometry.coordinates)
        .setHTML('<h3>' + feature.properties.title + '</h3><p>' + feature.properties.description + '</p>')
        .setLngLat(feature.geometry.coordinates)
        .addTo(map);
    })

    map.on('load', function() {
      for (p in window.PATHS) {
        var geojson = {
          "type": "FeatureCollection",
          "features": [{
              "type": "Feature",
              "geometry": {
                  "type": "MultiLineString",
                  "coordinates": window.PATHS[p].coords,
                  smoothness : 10,
              }
          }]
        }

        map.addLayer({
          'id': p,
          'type': 'line',
          'source': {
              'type': 'geojson',
              'data': geojson
          },
          'layout': {
              'line-cap': 'round',
              'line-join': 'round'
          },
          'paint': {
              'line-color': window.PATHS[p].color,
              'line-width': window.PATHS[p].isSelected ? 10 : 5,
              'line-width-transition': {'duration': 0},
              'line-opacity': window.PATHS[p].isSelected ? 0.9 : 0.5,
              'line-opacity-transition': {'duration': 0}
          }
        })
      }

      map.on('click', 'atx-jp', function(e) {
          window.PATHS['atx-jp'].isSelected = !window.PATHS['atx-jp'].isSelected;
          map.setPaintProperty('atx-jp','line-width', window.PATHS['atx-jp'].isSelected ? 10 : 5)
          map.setPaintProperty('atx-jp','line-opacity', window.PATHS['atx-jp'].isSelected ? 0.9 : 0.5)
      });

      map.on('click', 'jp-tw', function(e) {
          window.PATHS['jp-tw'].isSelected = !window.PATHS['jp-tw'].isSelected;
          map.setPaintProperty('jp-tw','line-width', window.PATHS['jp-tw'].isSelected ? 10 : 5)
          map.setPaintProperty('jp-tw','line-opacity', window.PATHS['jp-tw'].isSelected ? 0.9 : 0.5)
      });

      map.on('click', 'cn-tw', function(e) {
          window.PATHS['cn-tw'].isSelected = !window.PATHS['cn-tw'].isSelected;
          map.setPaintProperty('cn-tw','line-width', window.PATHS['cn-tw'].isSelected ? 10 : 5)
          map.setPaintProperty('cn-tw','line-opacity', window.PATHS['cn-tw'].isSelected ? 0.9 : 0.5)
      });
    });

</script>
<script src="js/cbpTooltipMenu.min.js"></script>
<script>
    // var menu = new cbpTooltipMenu( document.getElementById( 'cbp-tm-menu' ) );
</script>

</body>
</html>
